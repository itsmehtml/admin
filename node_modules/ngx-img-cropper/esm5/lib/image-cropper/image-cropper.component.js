import { __decorate, __metadata, __param } from "tslib";
import { Component, AfterViewInit, OnChanges, OnDestroy, ViewChild, ElementRef, Input, Output, EventEmitter, Renderer2, SimpleChanges, Inject } from '@angular/core';
import { CropperSettings } from './cropper-settings';
import { ImageCropper } from './imageCropper';
import { CropPosition } from './model/cropPosition';
import { Exif } from './exif';
import { DOCUMENT } from '@angular/common';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

var _c0 = ["cropcanvas"];
var _c1 = ["fileInput"];
function ImageCropperComponent_input_1_Template(rf, ctx) { if (rf & 1) {
    var _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "input", 4, 5);
    ɵngcc0.ɵɵlistener("change", function ImageCropperComponent_input_1_Template_input_change_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.fileChangeListener($event); });
    ɵngcc0.ɵɵelementEnd();
} }
var ImageCropperComponent = /** @class */ (function () {
    function ImageCropperComponent(renderer, document) {
        this.document = document;
        this.cropPositionChange = new EventEmitter();
        this.exif = new Exif();
        // tslint:disable-next-line:no-output-on-prefix
        this.onCrop = new EventEmitter();
        this.imageSet = new EventEmitter();
        this.dragUnsubscribers = [];
        this.renderer = renderer;
    }
    ImageCropperComponent.prototype.ngAfterViewInit = function () {
        var canvas = this.cropcanvas.nativeElement;
        if (!this.settings) {
            this.settings = new CropperSettings();
        }
        if (this.settings.cropperClass) {
            this.renderer.setAttribute(canvas, 'class', this.settings.cropperClass);
        }
        if (!this.settings.dynamicSizing) {
            this.renderer.setAttribute(canvas, 'width', this.settings.canvasWidth.toString());
            this.renderer.setAttribute(canvas, 'height', this.settings.canvasHeight.toString());
        }
        else {
            this.windowListener = this.resize.bind(this);
            window.addEventListener('resize', this.windowListener);
        }
        if (!this.cropper) {
            this.cropper = new ImageCropper(this.settings);
        }
        this.cropper.prepare(canvas);
    };
    ImageCropperComponent.prototype.ngOnChanges = function (changes) {
        if (this.isCropPositionChanged(changes)) {
            this.cropper.updateCropPosition(this.cropPosition.toBounds());
            if (this.cropper.isImageSet()) {
                var bounds = this.cropper.getCropBounds();
                this.image.image = this.cropper.getCroppedImageHelper().src;
                this.onCrop.emit(bounds);
            }
            this.updateCropBounds();
        }
        if (changes.inputImage) {
            this.setImage(changes.inputImage.currentValue);
        }
        if (changes.settings && this.cropper) {
            this.cropper.updateSettings(this.settings);
            if (this.cropper.isImageSet()) {
                this.image.image = this.cropper.getCroppedImageHelper().src;
                this.onCrop.emit(this.cropper.getCropBounds());
            }
        }
    };
    ImageCropperComponent.prototype.ngOnDestroy = function () {
        this.removeDragListeners();
        if (this.settings.dynamicSizing && this.windowListener) {
            window.removeEventListener('resize', this.windowListener);
        }
    };
    ImageCropperComponent.prototype.onTouchMove = function (event) {
        this.cropper.onTouchMove(event);
    };
    ImageCropperComponent.prototype.onTouchStart = function (event) {
        this.cropper.onTouchStart(event);
    };
    ImageCropperComponent.prototype.onTouchEnd = function (event) {
        this.cropper.onTouchEnd(event);
        if (this.cropper.isImageSet()) {
            this.image.image = this.cropper.getCroppedImageHelper().src;
            this.onCrop.emit(this.cropper.getCropBounds());
            this.updateCropBounds();
        }
    };
    ImageCropperComponent.prototype.onMouseDown = function (event) {
        this.dragUnsubscribers.push(this.renderer.listen(this.document, 'mousemove', this.onMouseMove.bind(this)));
        this.dragUnsubscribers.push(this.renderer.listen(this.document, 'mouseup', this.onMouseUp.bind(this)));
        this.cropper.onMouseDown(event);
        // if (!this.cropper.isImageSet() && !this.settings.noFileInput) {
        //   // load img
        //   this.fileInput.nativeElement.click();
        // }
    };
    ImageCropperComponent.prototype.removeDragListeners = function () {
        this.dragUnsubscribers.forEach(function (unsubscribe) { return unsubscribe(); });
    };
    ImageCropperComponent.prototype.onMouseUp = function (event) {
        this.removeDragListeners();
        if (this.cropper.isImageSet()) {
            this.cropper.onMouseUp(event);
            this.image.image = this.cropper.getCroppedImageHelper().src;
            this.onCrop.emit(this.cropper.getCropBounds());
            this.updateCropBounds();
        }
    };
    ImageCropperComponent.prototype.onMouseMove = function (event) {
        this.cropper.onMouseMove(event);
    };
    ImageCropperComponent.prototype.fileChangeListener = function ($event) {
        var _this = this;
        if ($event.target.files.length === 0) {
            return;
        }
        var file = $event.target.files[0];
        if (this.settings.allowedFilesRegex.test(file.name)) {
            var image_1 = new Image();
            var fileReader = new FileReader();
            fileReader.addEventListener('loadend', function (loadEvent) {
                image_1.addEventListener('load', function () {
                    _this.setImage(image_1);
                });
                image_1.src = loadEvent.target.result;
            });
            fileReader.readAsDataURL(file);
        }
    };
    ImageCropperComponent.prototype.resize = function () {
        var canvas = this.cropcanvas.nativeElement;
        this.settings.canvasWidth = canvas.offsetWidth;
        this.settings.canvasHeight = canvas.offsetHeight;
        this.cropper.resizeCanvas(canvas.offsetWidth, canvas.offsetHeight, true);
    };
    ImageCropperComponent.prototype.reset = function () {
        this.cropper.reset();
        this.renderer.setAttribute(this.cropcanvas.nativeElement, 'class', this.settings.cropperClass);
        this.image.image = this.cropper.getCroppedImageHelper().src;
    };
    ImageCropperComponent.prototype.setImage = function (image, newBounds) {
        var _this = this;
        if (newBounds === void 0) { newBounds = null; }
        this.imageSet.emit(true);
        this.renderer.setAttribute(this.cropcanvas.nativeElement, 'class', this.settings.cropperClass + " " + this.settings.croppingClass);
        this.raf = window.requestAnimationFrame(function () {
            if (_this.raf) {
                window.cancelAnimationFrame(_this.raf);
            }
            if (image.naturalHeight > 0 && image.naturalWidth > 0) {
                image.height = image.naturalHeight;
                image.width = image.naturalWidth;
                window.cancelAnimationFrame(_this.raf);
                _this.getOrientedImage(image, function (img) {
                    if (_this.settings.dynamicSizing) {
                        var canvas = _this.cropcanvas.nativeElement;
                        _this.settings.canvasWidth = canvas.offsetWidth;
                        _this.settings.canvasHeight = canvas.offsetHeight;
                        _this.cropper.resizeCanvas(canvas.offsetWidth, canvas.offsetHeight, false);
                    }
                    _this.cropper.setImage(img);
                    if (_this.cropPosition && _this.cropPosition.isInitialized()) {
                        _this.cropper.updateCropPosition(_this.cropPosition.toBounds());
                    }
                    _this.image.original = img;
                    var bounds = _this.cropper.getCropBounds();
                    _this.image.image = _this.cropper.getCroppedImageHelper().src;
                    if (!_this.image) {
                        _this.image = image;
                    }
                    if (newBounds != null) {
                        bounds = newBounds;
                        _this.cropper.setBounds(bounds);
                        _this.cropper.updateCropPosition(bounds);
                    }
                    _this.onCrop.emit(bounds);
                });
            }
        });
    };
    ImageCropperComponent.prototype.isCropPositionChanged = function (changes) {
        if (this.cropper &&
            changes.cropPosition &&
            this.isCropPositionUpdateNeeded) {
            return true;
        }
        else {
            this.isCropPositionUpdateNeeded = true;
            return false;
        }
    };
    ImageCropperComponent.prototype.updateCropBounds = function () {
        var cropBound = this.cropper.getCropBounds();
        this.cropPositionChange.emit(new CropPosition(cropBound.left, cropBound.top, cropBound.width, cropBound.height));
        this.isCropPositionUpdateNeeded = false;
    };
    ImageCropperComponent.prototype.getOrientedImage = function (image, callback) {
        var _this = this;
        var img;
        this.exif.getData(image, function () {
            var orientation = _this.exif.getTag(image, 'Orientation');
            if ([3, 6, 8].indexOf(orientation) > -1) {
                var canvas = document.createElement('canvas');
                var ctx = canvas.getContext('2d');
                var cw = image.width;
                var ch = image.height;
                var cx = 0;
                var cy = 0;
                var deg = 0;
                switch (orientation) {
                    case 3:
                        cx = -image.width;
                        cy = -image.height;
                        deg = 180;
                        break;
                    case 6:
                        cw = image.height;
                        ch = image.width;
                        cy = -image.height;
                        deg = 90;
                        break;
                    case 8:
                        cw = image.height;
                        ch = image.width;
                        cx = -image.width;
                        deg = 270;
                        break;
                    default:
                        break;
                }
                canvas.width = cw;
                canvas.height = ch;
                ctx.rotate((deg * Math.PI) / 180);
                ctx.drawImage(image, cx, cy);
                img = document.createElement('img');
                img.width = cw;
                img.height = ch;
                img.addEventListener('load', function () {
                    callback(img);
                });
                img.src = canvas.toDataURL('image/png');
            }
            else {
                img = image;
                callback(img);
            }
        });
    };
    ImageCropperComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
    ]; };
    __decorate([
        ViewChild('cropcanvas', { static: true }),
        __metadata("design:type", ElementRef)
    ], ImageCropperComponent.prototype, "cropcanvas", void 0);
    __decorate([
        ViewChild('fileInput'),
        __metadata("design:type", ElementRef)
    ], ImageCropperComponent.prototype, "fileInput", void 0);
    __decorate([
        Input(),
        __metadata("design:type", CropperSettings)
    ], ImageCropperComponent.prototype, "settings", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], ImageCropperComponent.prototype, "image", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], ImageCropperComponent.prototype, "inputImage", void 0);
    __decorate([
        Input(),
        __metadata("design:type", ImageCropper)
    ], ImageCropperComponent.prototype, "cropper", void 0);
    __decorate([
        Input(),
        __metadata("design:type", CropPosition)
    ], ImageCropperComponent.prototype, "cropPosition", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], ImageCropperComponent.prototype, "cropPositionChange", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], ImageCropperComponent.prototype, "onCrop", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], ImageCropperComponent.prototype, "imageSet", void 0);
    ImageCropperComponent = __decorate([ __param(1, Inject(DOCUMENT)),
        __metadata("design:paramtypes", [Renderer2, Object])
    ], ImageCropperComponent);
ImageCropperComponent.ɵfac = function ImageCropperComponent_Factory(t) { return new (t || ImageCropperComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DOCUMENT)); };
ImageCropperComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ImageCropperComponent, selectors: [["img-cropper"]], viewQuery: function ImageCropperComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(_c0, true);
        ɵngcc0.ɵɵviewQuery(_c1, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.cropcanvas = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);
    } }, inputs: { settings: "settings", cropper: "cropper", image: "image", inputImage: "inputImage", cropPosition: "cropPosition" }, outputs: { cropPositionChange: "cropPositionChange", onCrop: "onCrop", imageSet: "imageSet" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 4, vars: 1, consts: [[1, "ng2-imgcrop"], ["type", "file", "accept", "image/*", 3, "change", 4, "ngIf"], [3, "mousedown", "touchmove", "touchend", "touchstart"], ["cropcanvas", ""], ["type", "file", "accept", "image/*", 3, "change"], ["fileInput", ""]], template: function ImageCropperComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "span", 0);
        ɵngcc0.ɵɵtemplate(1, ImageCropperComponent_input_1_Template, 2, 0, "input", 1);
        ɵngcc0.ɵɵelementStart(2, "canvas", 2, 3);
        ɵngcc0.ɵɵlistener("mousedown", function ImageCropperComponent_Template_canvas_mousedown_2_listener($event) { return ctx.onMouseDown($event); })("touchmove", function ImageCropperComponent_Template_canvas_touchmove_2_listener($event) { return ctx.onTouchMove($event); })("touchend", function ImageCropperComponent_Template_canvas_touchend_2_listener($event) { return ctx.onTouchEnd($event); })("touchstart", function ImageCropperComponent_Template_canvas_touchstart_2_listener($event) { return ctx.onTouchStart($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.settings.noFileInput);
    } }, directives: [ɵngcc1.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ImageCropperComponent, [{
        type: Component,
        args: [{
                // tslint:disable-next-line:component-selector
                selector: 'img-cropper',
                template: "<span class=\"ng2-imgcrop\">\r\n  <input\r\n    *ngIf=\"!settings.noFileInput\"\r\n    #fileInput\r\n    type=\"file\"\r\n    accept=\"image/*\"\r\n    (change)=\"fileChangeListener($event)\"\r\n  />\r\n  <canvas\r\n    #cropcanvas\r\n    (mousedown)=\"onMouseDown($event)\"\r\n    (touchmove)=\"onTouchMove($event)\"\r\n    (touchend)=\"onTouchEnd($event)\"\r\n    (touchstart)=\"onTouchStart($event)\"\r\n  >\r\n  </canvas>\r\n</span>\r\n"
            }]
    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: undefined, decorators: [{
                type: Inject,
                args: [DOCUMENT]
            }] }]; }, { cropPositionChange: [{
            type: Output
        }], onCrop: [{
            type: Output
        }], imageSet: [{
            type: Output
        }], settings: [{
            type: Input
        }], cropper: [{
            type: Input
        }], cropcanvas: [{
            type: ViewChild,
            args: ['cropcanvas', { static: true }]
        }], fileInput: [{
            type: ViewChild,
            args: ['fileInput']
        }], image: [{
            type: Input
        }], inputImage: [{
            type: Input
        }], cropPosition: [{
            type: Input
        }] }); })();
    return ImageCropperComponent;
}());
export { ImageCropperComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1hZ2UtY3JvcHBlci5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIm5neC1pbWctY3JvcHBlci9saWIvaW1hZ2UtY3JvcHBlci9pbWFnZS1jcm9wcGVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxhQUFhLEVBQ2IsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsVUFBVSxFQUNWLEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUNaLFNBQVMsRUFDVCxhQUFhLEVBQUUsTUFBTSxFQUN0QixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sb0JBQW9CLENBQUMsckRBQXJELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNyRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUMsOUNBQTlDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sc0JBQXNCLENBQUMscERBQXBELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUVwRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sUUFBUSxDQUFDLDlCQUE5QixPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQzlCLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQywzQ0FBM0MsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBTzNDO29CQWdDRTs7T0FBWSxRQUFtQixFQUNPLFFBQVE7V0FBUixhQUFRO0VBQVIsUUFBUSxDQUFBLFNBckJ2Qyx1QkFBa0IsR0FBK0IsSUFBSSxZQUFZLEVBRXJFLENBQUM7Q0FFSSxTQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxTQUUxQjt1Q0FBK0M7R0FDOUIsV0FBTSxHQUFzQixJQUFJ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QTVWQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBBZnRlclZpZXdJbml0LFxyXG4gIE9uQ2hhbmdlcyxcclxuICBPbkRlc3Ryb3ksXHJcbiAgVmlld0NoaWxkLFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgSW5wdXQsXHJcbiAgT3V0cHV0LFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBSZW5kZXJlcjIsXHJcbiAgU2ltcGxlQ2hhbmdlcywgSW5qZWN0XHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENyb3BwZXJTZXR0aW5ncyB9IGZyb20gJy4vY3JvcHBlci1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IEltYWdlQ3JvcHBlciB9IGZyb20gJy4vaW1hZ2VDcm9wcGVyJztcclxuaW1wb3J0IHsgQ3JvcFBvc2l0aW9uIH0gZnJvbSAnLi9tb2RlbC9jcm9wUG9zaXRpb24nO1xyXG5pbXBvcnQgeyBCb3VuZHMgfSBmcm9tICcuL21vZGVsL2JvdW5kcyc7XHJcbmltcG9ydCB7IEV4aWYgfSBmcm9tICcuL2V4aWYnO1xyXG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcG9uZW50LXNlbGVjdG9yXHJcbiAgc2VsZWN0b3I6ICdpbWctY3JvcHBlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2ltYWdlLWNyb3BwZXIuY29tcG9uZW50Lmh0bWwnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBJbWFnZUNyb3BwZXJDb21wb25lbnRcclxuICBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuICBAVmlld0NoaWxkKCdjcm9wY2FudmFzJywgeyBzdGF0aWM6IHRydWUgfSlcclxuICBjcm9wY2FudmFzOiBFbGVtZW50UmVmO1xyXG4gIEBWaWV3Q2hpbGQoJ2ZpbGVJbnB1dCcpIGZpbGVJbnB1dDogRWxlbWVudFJlZjtcclxuXHJcbiAgQElucHV0KCkgcHVibGljIHNldHRpbmdzOiBDcm9wcGVyU2V0dGluZ3M7XHJcbiAgQElucHV0KCkgcHVibGljIGltYWdlOiBhbnk7XHJcbiAgQElucHV0KCkgcHVibGljIGlucHV0SW1hZ2U6IGFueTtcclxuICBASW5wdXQoKSBwdWJsaWMgY3JvcHBlcjogSW1hZ2VDcm9wcGVyO1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBjcm9wUG9zaXRpb246IENyb3BQb3NpdGlvbjtcclxuICBAT3V0cHV0KClcclxuICBwdWJsaWMgY3JvcFBvc2l0aW9uQ2hhbmdlOiBFdmVudEVtaXR0ZXI8Q3JvcFBvc2l0aW9uPiA9IG5ldyBFdmVudEVtaXR0ZXI8XHJcbiAgICBDcm9wUG9zaXRpb25cclxuICA+KCk7XHJcblxyXG4gIHByaXZhdGUgZXhpZiA9IG5ldyBFeGlmKCk7XHJcblxyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1vdXRwdXQtb24tcHJlZml4XHJcbiAgQE91dHB1dCgpIHB1YmxpYyBvbkNyb3A6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBpbWFnZVNldDogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICBwdWJsaWMgY3JvcHBlZFdpZHRoOiBudW1iZXI7XHJcbiAgcHVibGljIGNyb3BwZWRIZWlnaHQ6IG51bWJlcjtcclxuICBwdWJsaWMgaW50ZXJ2YWxSZWY6IG51bWJlcjtcclxuICBwdWJsaWMgcmFmOiBudW1iZXI7XHJcbiAgcHVibGljIHJlbmRlcmVyOiBSZW5kZXJlcjI7XHJcbiAgcHVibGljIHdpbmRvd0xpc3RlbmVyOiBFdmVudExpc3RlbmVyT2JqZWN0O1xyXG5cclxuICBwcml2YXRlIGlzQ3JvcFBvc2l0aW9uVXBkYXRlTmVlZGVkOiBib29sZWFuO1xyXG4gIHByaXZhdGUgZHJhZ1Vuc3Vic2NyaWJlcnM6ICgoKSA9PiB2b2lkKVtdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgICAgICAgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2N1bWVudCkge1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSB0aGlzLmNyb3BjYW52YXMubmF0aXZlRWxlbWVudDtcclxuXHJcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MpIHtcclxuICAgICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBDcm9wcGVyU2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5jcm9wcGVyQ2xhc3MpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoY2FudmFzLCAnY2xhc3MnLCB0aGlzLnNldHRpbmdzLmNyb3BwZXJDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmR5bmFtaWNTaXppbmcpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgY2FudmFzLFxyXG4gICAgICAgICd3aWR0aCcsXHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jYW52YXNXaWR0aC50b1N0cmluZygpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKFxyXG4gICAgICAgIGNhbnZhcyxcclxuICAgICAgICAnaGVpZ2h0JyxcclxuICAgICAgICB0aGlzLnNldHRpbmdzLmNhbnZhc0hlaWdodC50b1N0cmluZygpXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLndpbmRvd0xpc3RlbmVyID0gdGhpcy5yZXNpemUuYmluZCh0aGlzKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMud2luZG93TGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5jcm9wcGVyKSB7XHJcbiAgICAgIHRoaXMuY3JvcHBlciA9IG5ldyBJbWFnZUNyb3BwZXIodGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcm9wcGVyLnByZXBhcmUoY2FudmFzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pc0Nyb3BQb3NpdGlvbkNoYW5nZWQoY2hhbmdlcykpIHtcclxuICAgICAgdGhpcy5jcm9wcGVyLnVwZGF0ZUNyb3BQb3NpdGlvbih0aGlzLmNyb3BQb3NpdGlvbi50b0JvdW5kcygpKTtcclxuICAgICAgaWYgKHRoaXMuY3JvcHBlci5pc0ltYWdlU2V0KCkpIHtcclxuICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmNyb3BwZXIuZ2V0Q3JvcEJvdW5kcygpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UuaW1hZ2UgPSB0aGlzLmNyb3BwZXIuZ2V0Q3JvcHBlZEltYWdlSGVscGVyKCkuc3JjO1xyXG4gICAgICAgIHRoaXMub25Dcm9wLmVtaXQoYm91bmRzKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVwZGF0ZUNyb3BCb3VuZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hhbmdlcy5pbnB1dEltYWdlKSB7XHJcbiAgICAgIHRoaXMuc2V0SW1hZ2UoY2hhbmdlcy5pbnB1dEltYWdlLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNoYW5nZXMuc2V0dGluZ3MgJiYgdGhpcy5jcm9wcGVyKSB7XHJcbiAgICAgIHRoaXMuY3JvcHBlci51cGRhdGVTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgaWYgKHRoaXMuY3JvcHBlci5pc0ltYWdlU2V0KCkpIHtcclxuICAgICAgICB0aGlzLmltYWdlLmltYWdlID0gdGhpcy5jcm9wcGVyLmdldENyb3BwZWRJbWFnZUhlbHBlcigpLnNyYztcclxuICAgICAgICB0aGlzLm9uQ3JvcC5lbWl0KHRoaXMuY3JvcHBlci5nZXRDcm9wQm91bmRzKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLnJlbW92ZURyYWdMaXN0ZW5lcnMoKTtcclxuICAgIGlmICh0aGlzLnNldHRpbmdzLmR5bmFtaWNTaXppbmcgJiYgdGhpcy53aW5kb3dMaXN0ZW5lcikge1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy53aW5kb3dMaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Ub3VjaE1vdmUoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JvcHBlci5vblRvdWNoTW92ZShldmVudCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Ub3VjaFN0YXJ0KGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XHJcbiAgICB0aGlzLmNyb3BwZXIub25Ub3VjaFN0YXJ0KGV2ZW50KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvblRvdWNoRW5kKGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XHJcbiAgICB0aGlzLmNyb3BwZXIub25Ub3VjaEVuZChldmVudCk7XHJcbiAgICBpZiAodGhpcy5jcm9wcGVyLmlzSW1hZ2VTZXQoKSkge1xyXG4gICAgICB0aGlzLmltYWdlLmltYWdlID0gdGhpcy5jcm9wcGVyLmdldENyb3BwZWRJbWFnZUhlbHBlcigpLnNyYztcclxuICAgICAgdGhpcy5vbkNyb3AuZW1pdCh0aGlzLmNyb3BwZXIuZ2V0Q3JvcEJvdW5kcygpKTtcclxuICAgICAgdGhpcy51cGRhdGVDcm9wQm91bmRzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIHRoaXMuZHJhZ1Vuc3Vic2NyaWJlcnMucHVzaCh0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLmRvY3VtZW50LCAnbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpKSk7XHJcbiAgICB0aGlzLmRyYWdVbnN1YnNjcmliZXJzLnB1c2godGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy5kb2N1bWVudCwgJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpKSk7XHJcblxyXG4gICAgdGhpcy5jcm9wcGVyLm9uTW91c2VEb3duKGV2ZW50KTtcclxuICAgIC8vIGlmICghdGhpcy5jcm9wcGVyLmlzSW1hZ2VTZXQoKSAmJiAhdGhpcy5zZXR0aW5ncy5ub0ZpbGVJbnB1dCkge1xyXG4gICAgLy8gICAvLyBsb2FkIGltZ1xyXG4gICAgLy8gICB0aGlzLmZpbGVJbnB1dC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XHJcbiAgICAvLyB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbW92ZURyYWdMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmRyYWdVbnN1YnNjcmliZXJzLmZvckVhY2godW5zdWJzY3JpYmUgPT4gdW5zdWJzY3JpYmUoKSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Nb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICB0aGlzLnJlbW92ZURyYWdMaXN0ZW5lcnMoKTtcclxuICAgIGlmICh0aGlzLmNyb3BwZXIuaXNJbWFnZVNldCgpKSB7XHJcbiAgICAgIHRoaXMuY3JvcHBlci5vbk1vdXNlVXAoZXZlbnQpO1xyXG4gICAgICB0aGlzLmltYWdlLmltYWdlID0gdGhpcy5jcm9wcGVyLmdldENyb3BwZWRJbWFnZUhlbHBlcigpLnNyYztcclxuICAgICAgdGhpcy5vbkNyb3AuZW1pdCh0aGlzLmNyb3BwZXIuZ2V0Q3JvcEJvdW5kcygpKTtcclxuICAgICAgdGhpcy51cGRhdGVDcm9wQm91bmRzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Nb3VzZU1vdmUoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JvcHBlci5vbk1vdXNlTW92ZShldmVudCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZmlsZUNoYW5nZUxpc3RlbmVyKCRldmVudDogYW55KSB7XHJcbiAgICBpZiAoJGV2ZW50LnRhcmdldC5maWxlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGU6IEZpbGUgPSAkZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xyXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuYWxsb3dlZEZpbGVzUmVnZXgudGVzdChmaWxlLm5hbWUpKSB7XHJcbiAgICAgIGNvbnN0IGltYWdlOiBhbnkgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgY29uc3QgZmlsZVJlYWRlcjogRmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblxyXG4gICAgICBmaWxlUmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCAobG9hZEV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5zZXRJbWFnZShpbWFnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gbG9hZEV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXNpemUoKSB7XHJcbiAgICBjb25zdCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gdGhpcy5jcm9wY2FudmFzLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB0aGlzLnNldHRpbmdzLmNhbnZhc1dpZHRoID0gY2FudmFzLm9mZnNldFdpZHRoO1xyXG4gICAgdGhpcy5zZXR0aW5ncy5jYW52YXNIZWlnaHQgPSBjYW52YXMub2Zmc2V0SGVpZ2h0O1xyXG4gICAgdGhpcy5jcm9wcGVyLnJlc2l6ZUNhbnZhcyhjYW52YXMub2Zmc2V0V2lkdGgsIGNhbnZhcy5vZmZzZXRIZWlnaHQsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5jcm9wcGVyLnJlc2V0KCk7XHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZShcclxuICAgICAgdGhpcy5jcm9wY2FudmFzLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICdjbGFzcycsXHJcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3JvcHBlckNsYXNzXHJcbiAgICApO1xyXG4gICAgdGhpcy5pbWFnZS5pbWFnZSA9IHRoaXMuY3JvcHBlci5nZXRDcm9wcGVkSW1hZ2VIZWxwZXIoKS5zcmM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0SW1hZ2UoaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsIG5ld0JvdW5kczogYW55ID0gbnVsbCkge1xyXG4gICAgdGhpcy5pbWFnZVNldC5lbWl0KHRydWUpO1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgIHRoaXMuY3JvcGNhbnZhcy5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAnY2xhc3MnLFxyXG4gICAgICBgJHt0aGlzLnNldHRpbmdzLmNyb3BwZXJDbGFzc30gJHt0aGlzLnNldHRpbmdzLmNyb3BwaW5nQ2xhc3N9YFxyXG4gICAgKTtcclxuICAgIHRoaXMucmFmID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnJhZikge1xyXG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJhZik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGltYWdlLm5hdHVyYWxIZWlnaHQgPiAwICYmIGltYWdlLm5hdHVyYWxXaWR0aCA+IDApIHtcclxuICAgICAgICBpbWFnZS5oZWlnaHQgPSBpbWFnZS5uYXR1cmFsSGVpZ2h0O1xyXG4gICAgICAgIGltYWdlLndpZHRoID0gaW1hZ2UubmF0dXJhbFdpZHRoO1xyXG5cclxuICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yYWYpO1xyXG4gICAgICAgIHRoaXMuZ2V0T3JpZW50ZWRJbWFnZShpbWFnZSwgKGltZzogSFRNTEltYWdlRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZHluYW1pY1NpemluZykge1xyXG4gICAgICAgICAgICBjb25zdCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gdGhpcy5jcm9wY2FudmFzLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY2FudmFzV2lkdGggPSBjYW52YXMub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY2FudmFzSGVpZ2h0ID0gY2FudmFzLm9mZnNldEhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5jcm9wcGVyLnJlc2l6ZUNhbnZhcyhcclxuICAgICAgICAgICAgICBjYW52YXMub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgICAgICAgY2FudmFzLm9mZnNldEhlaWdodCxcclxuICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMuY3JvcHBlci5zZXRJbWFnZShpbWcpO1xyXG4gICAgICAgICAgaWYgKHRoaXMuY3JvcFBvc2l0aW9uICYmIHRoaXMuY3JvcFBvc2l0aW9uLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNyb3BwZXIudXBkYXRlQ3JvcFBvc2l0aW9uKHRoaXMuY3JvcFBvc2l0aW9uLnRvQm91bmRzKCkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMuaW1hZ2Uub3JpZ2luYWwgPSBpbWc7XHJcbiAgICAgICAgICBsZXQgYm91bmRzID0gdGhpcy5jcm9wcGVyLmdldENyb3BCb3VuZHMoKTtcclxuICAgICAgICAgIHRoaXMuaW1hZ2UuaW1hZ2UgPSB0aGlzLmNyb3BwZXIuZ2V0Q3JvcHBlZEltYWdlSGVscGVyKCkuc3JjO1xyXG5cclxuICAgICAgICAgIGlmICghdGhpcy5pbWFnZSkge1xyXG4gICAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKG5ld0JvdW5kcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGJvdW5kcyA9IG5ld0JvdW5kcztcclxuICAgICAgICAgICAgdGhpcy5jcm9wcGVyLnNldEJvdW5kcyhib3VuZHMpO1xyXG4gICAgICAgICAgICB0aGlzLmNyb3BwZXIudXBkYXRlQ3JvcFBvc2l0aW9uKGJvdW5kcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLm9uQ3JvcC5lbWl0KGJvdW5kcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc0Nyb3BQb3NpdGlvbkNoYW5nZWQoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmNyb3BwZXIgJiZcclxuICAgICAgY2hhbmdlcy5jcm9wUG9zaXRpb24gJiZcclxuICAgICAgdGhpcy5pc0Nyb3BQb3NpdGlvblVwZGF0ZU5lZWRlZFxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pc0Nyb3BQb3NpdGlvblVwZGF0ZU5lZWRlZCA9IHRydWU7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQ3JvcEJvdW5kcygpOiB2b2lkIHtcclxuICAgIGNvbnN0IGNyb3BCb3VuZDogQm91bmRzID0gdGhpcy5jcm9wcGVyLmdldENyb3BCb3VuZHMoKTtcclxuICAgIHRoaXMuY3JvcFBvc2l0aW9uQ2hhbmdlLmVtaXQoXHJcbiAgICAgIG5ldyBDcm9wUG9zaXRpb24oXHJcbiAgICAgICAgY3JvcEJvdW5kLmxlZnQsXHJcbiAgICAgICAgY3JvcEJvdW5kLnRvcCxcclxuICAgICAgICBjcm9wQm91bmQud2lkdGgsXHJcbiAgICAgICAgY3JvcEJvdW5kLmhlaWdodFxyXG4gICAgICApXHJcbiAgICApO1xyXG4gICAgdGhpcy5pc0Nyb3BQb3NpdGlvblVwZGF0ZU5lZWRlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRPcmllbnRlZEltYWdlKFxyXG4gICAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsXHJcbiAgICBjYWxsYmFjazogKGltZzogSFRNTEltYWdlRWxlbWVudCkgPT4gdm9pZFxyXG4gICkge1xyXG4gICAgbGV0IGltZzogYW55O1xyXG5cclxuICAgIHRoaXMuZXhpZi5nZXREYXRhKGltYWdlLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdGhpcy5leGlmLmdldFRhZyhpbWFnZSwgJ09yaWVudGF0aW9uJyk7XHJcblxyXG4gICAgICBpZiAoWzMsIDYsIDhdLmluZGV4T2Yob3JpZW50YXRpb24pID4gLTEpIHtcclxuICAgICAgICBjb25zdCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY29uc3QgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSBjYW52YXMuZ2V0Q29udGV4dChcclxuICAgICAgICAgICcyZCdcclxuICAgICAgICApIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgICAgICBsZXQgY3c6IG51bWJlciA9IGltYWdlLndpZHRoO1xyXG4gICAgICAgIGxldCBjaDogbnVtYmVyID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgIGxldCBjeCA9IDA7XHJcbiAgICAgICAgbGV0IGN5ID0gMDtcclxuICAgICAgICBsZXQgZGVnID0gMDtcclxuXHJcbiAgICAgICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xyXG4gICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICBjeCA9IC1pbWFnZS53aWR0aDtcclxuICAgICAgICAgICAgY3kgPSAtaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICBkZWcgPSAxODA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICBjdyA9IGltYWdlLmhlaWdodDtcclxuICAgICAgICAgICAgY2ggPSBpbWFnZS53aWR0aDtcclxuICAgICAgICAgICAgY3kgPSAtaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICBkZWcgPSA5MDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgIGN3ID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICBjaCA9IGltYWdlLndpZHRoO1xyXG4gICAgICAgICAgICBjeCA9IC1pbWFnZS53aWR0aDtcclxuICAgICAgICAgICAgZGVnID0gMjcwO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gY3c7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGNoO1xyXG4gICAgICAgIGN0eC5yb3RhdGUoKGRlZyAqIE1hdGguUEkpIC8gMTgwKTtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCBjeCwgY3kpO1xyXG4gICAgICAgIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIGltZy53aWR0aCA9IGN3O1xyXG4gICAgICAgIGltZy5oZWlnaHQgPSBjaDtcclxuICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgICAgICAgIGNhbGxiYWNrKGltZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW1nLnNyYyA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGltZyA9IGltYWdlO1xyXG4gICAgICAgIGNhbGxiYWNrKGltZyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXX0=