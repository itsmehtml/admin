{"ast":null,"code":"/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * @module echarts/chart/helper/Symbol\r\n */\n\n/**\r\n * @constructor\r\n * @alias {module:echarts/chart/helper/Symbol}\r\n * @param {module:echarts/data/List} data\r\n * @param {number} idx\r\n * @extends {module:zrender/graphic/Group}\r\n */\n\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\r\n * @public\r\n * @static\r\n * @param {module:echarts/data/List} data\r\n * @param {number} dataIndex\r\n * @return {Array.<number>} [width, height]\r\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\r\n * Stop animation\r\n * @param {boolean} toLastFrame\r\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\r\n * FIXME:\r\n * Caution: This method breaks the encapsulation of this module,\r\n * but it indeed brings convenience. So do not use the method\r\n * unless you detailedly know all the implements of `Symbol`,\r\n * especially animation.\r\n *\r\n * Get symbol path element.\r\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\r\n * Get scale(aka, current symbol size).\r\n * Including the change caused by animation\r\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\r\n * Highlight symbol\r\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\r\n * Downplay symbol\r\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\r\n * @param {number} zlevel\r\n * @param {number} z\r\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\r\n * Update symbol properties\r\n * @param {module:echarts/data/List} data\r\n * @param {number} idx\r\n * @param {Object} [seriesScope]\r\n * @param {Object} [seriesScope.itemStyle]\r\n * @param {Object} [seriesScope.hoverItemStyle]\r\n * @param {Object} [seriesScope.symbolRotate]\r\n * @param {Object} [seriesScope.symbolOffset]\r\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\r\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\r\n * @param {boolean} [seriesScope.hoverAnimation]\r\n * @param {Object} [seriesScope.cursorStyle]\r\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\r\n * @param {string} [seriesScope.symbolInnerColor]\r\n * @param {Object} [seriesScope.fadeIn=false]\r\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\r\n * @param {module:echarts/data/List} data\r\n * @param {number} idx\r\n * @param {Array.<number>} symbolSize\r\n * @param {Object} [seriesScope]\r\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  } else {\n    symbolPath.setStyle({\n      opacity: null,\n      shadowBlur: null,\n      shadowOffsetX: null,\n      shadowOffsetY: null,\n      shadowColor: null\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\r\n * @param {Function} cb\r\n * @param {Object} [opt]\r\n * @param {Object} [opt.keepLabel=true]\r\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","map":{"version":3,"sources":["C:/Users/user/Desktop/Admin/node_modules/echarts/lib/chart/helper/Symbol.js"],"names":["zrUtil","require","_symbol","createSymbol","graphic","_number","parsePercent","_labelHelper","getDefaultLabel","SymbolClz","data","idx","seriesScope","Group","call","updateData","symbolProto","prototype","getSymbolSize","symbolSize","getItemVisual","Array","slice","getScale","driftSymbol","dx","dy","parent","drift","_createSymbol","symbolType","keepAspect","removeAll","color","symbolPath","attr","z2","culling","scale","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","seriesModel","hostModel","isInit","updateProps","_updateCommon","fadeIn","target","style","opacity","initProps","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","type","useStyle","strokeNoScale","setStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","itemStyle","hoverItemStyle","symbolRotate","symbolOffset","labelModel","hoverLabelModel","hoverAnimation","cursorStyle","hasItemOption","itemModel","getItemModel","getModel","getItemStyle","getShallow","extend","elStyle","Math","PI","setColor","symbolInnerColor","liftZ","z2Origin","__z2Origin","useNameLabel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","getLabelDefaultText","isRectText","autoColor","opt","getName","__symbolOriginalScale","hoverStyle","highDownOnUpdate","isAnimationEnabled","setHoverStyle","fromState","toState","incremental","useHoverLayer","ratio","emphasisOpt","max","animateTo","fadeOut","cb","keepLabel","text","dataIndex","inherits","_default","module","exports"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,MAAM,GAAGC,OAAO,CAAC,uBAAD,CAApB;;AAEA,IAAIC,OAAO,GAAGD,OAAO,CAAC,mBAAD,CAArB;;AAEA,IAAIE,YAAY,GAAGD,OAAO,CAACC,YAA3B;;AAEA,IAAIC,OAAO,GAAGH,OAAO,CAAC,oBAAD,CAArB;;AAEA,IAAII,OAAO,GAAGJ,OAAO,CAAC,mBAAD,CAArB;;AAEA,IAAIK,YAAY,GAAGD,OAAO,CAACC,YAA3B;;AAEA,IAAIC,YAAY,GAAGN,OAAO,CAAC,eAAD,CAA1B;;AAEA,IAAIO,eAAe,GAAGD,YAAY,CAACC,eAAnC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,SAAT,CAAmBC,IAAnB,EAAyBC,GAAzB,EAA8BC,WAA9B,EAA2C;AACzCR,EAAAA,OAAO,CAACS,KAAR,CAAcC,IAAd,CAAmB,IAAnB;AACA,OAAKC,UAAL,CAAgBL,IAAhB,EAAsBC,GAAtB,EAA2BC,WAA3B;AACD;;AAED,IAAII,WAAW,GAAGP,SAAS,CAACQ,SAA5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,aAAa,GAAGT,SAAS,CAACS,aAAV,GAA0B,UAAUR,IAAV,EAAgBC,GAAhB,EAAqB;AACjE,MAAIQ,UAAU,GAAGT,IAAI,CAACU,aAAL,CAAmBT,GAAnB,EAAwB,YAAxB,CAAjB;AACA,SAAOQ,UAAU,YAAYE,KAAtB,GAA8BF,UAAU,CAACG,KAAX,EAA9B,GAAmD,CAAC,CAACH,UAAF,EAAc,CAACA,UAAf,CAA1D;AACD,CAHD;;AAKA,SAASI,QAAT,CAAkBJ,UAAlB,EAA8B;AAC5B,SAAO,CAACA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAjB,EAAoBA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAApC,CAAP;AACD;;AAED,SAASK,WAAT,CAAqBC,EAArB,EAAyBC,EAAzB,EAA6B;AAC3B,OAAKC,MAAL,CAAYC,KAAZ,CAAkBH,EAAlB,EAAsBC,EAAtB;AACD;;AAEDV,WAAW,CAACa,aAAZ,GAA4B,UAAUC,UAAV,EAAsBpB,IAAtB,EAA4BC,GAA5B,EAAiCQ,UAAjC,EAA6CY,UAA7C,EAAyD;AACnF;AACA,OAAKC,SAAL;AACA,MAAIC,KAAK,GAAGvB,IAAI,CAACU,aAAL,CAAmBT,GAAnB,EAAwB,OAAxB,CAAZ,CAHmF,CAGrC;AAC9C;AACA;AACA;AACA;AACA;;AAEA,MAAIuB,UAAU,GAAG/B,YAAY,CAAC2B,UAAD,EAAa,CAAC,CAAd,EAAiB,CAAC,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,EAA2BG,KAA3B,EAAkCF,UAAlC,CAA7B;AACAG,EAAAA,UAAU,CAACC,IAAX,CAAgB;AACdC,IAAAA,EAAE,EAAE,GADU;AAEdC,IAAAA,OAAO,EAAE,IAFK;AAGdC,IAAAA,KAAK,EAAEf,QAAQ,CAACJ,UAAD;AAHD,GAAhB,EAXmF,CAe/E;;AAEJe,EAAAA,UAAU,CAACN,KAAX,GAAmBJ,WAAnB;AACA,OAAKe,WAAL,GAAmBT,UAAnB;AACA,OAAKU,GAAL,CAASN,UAAT;AACD,CApBD;AAqBA;AACA;AACA;AACA;;;AAGAlB,WAAW,CAACyB,mBAAZ,GAAkC,UAAUC,WAAV,EAAuB;AACvD,OAAKC,OAAL,CAAa,CAAb,EAAgBC,aAAhB,CAA8BF,WAA9B;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA1B,WAAW,CAAC6B,aAAZ,GAA4B,YAAY;AACtC,SAAO,KAAKF,OAAL,CAAa,CAAb,CAAP;AACD,CAFD;AAGA;AACA;AACA;AACA;;;AAGA3B,WAAW,CAACO,QAAZ,GAAuB,YAAY;AACjC,SAAO,KAAKoB,OAAL,CAAa,CAAb,EAAgBL,KAAvB;AACD,CAFD;AAGA;AACA;AACA;;;AAGAtB,WAAW,CAAC8B,SAAZ,GAAwB,YAAY;AAClC,OAAKH,OAAL,CAAa,CAAb,EAAgBI,OAAhB,CAAwB,UAAxB;AACD,CAFD;AAGA;AACA;AACA;;;AAGA/B,WAAW,CAACgC,QAAZ,GAAuB,YAAY;AACjC,OAAKL,OAAL,CAAa,CAAb,EAAgBI,OAAhB,CAAwB,QAAxB;AACD,CAFD;AAGA;AACA;AACA;AACA;;;AAGA/B,WAAW,CAACiC,IAAZ,GAAmB,UAAUC,MAAV,EAAkBC,CAAlB,EAAqB;AACtC,MAAIjB,UAAU,GAAG,KAAKS,OAAL,CAAa,CAAb,CAAjB;AACAT,EAAAA,UAAU,CAACgB,MAAX,GAAoBA,MAApB;AACAhB,EAAAA,UAAU,CAACiB,CAAX,GAAeA,CAAf;AACD,CAJD;;AAMAnC,WAAW,CAACoC,YAAZ,GAA2B,UAAUC,SAAV,EAAqB;AAC9C,MAAInB,UAAU,GAAG,KAAKS,OAAL,CAAa,CAAb,CAAjB;AACAT,EAAAA,UAAU,CAACmB,SAAX,GAAuBA,SAAvB;AACAnB,EAAAA,UAAU,CAACoB,MAAX,GAAoBD,SAAS,GAAG,MAAH,GAAYnB,UAAU,CAACoB,MAApD;AACD,CAJD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAtC,WAAW,CAACD,UAAZ,GAAyB,UAAUL,IAAV,EAAgBC,GAAhB,EAAqBC,WAArB,EAAkC;AACzD,OAAK2C,MAAL,GAAc,KAAd;AACA,MAAIzB,UAAU,GAAGpB,IAAI,CAACU,aAAL,CAAmBT,GAAnB,EAAwB,QAAxB,KAAqC,QAAtD;AACA,MAAI6C,WAAW,GAAG9C,IAAI,CAAC+C,SAAvB;AACA,MAAItC,UAAU,GAAGD,aAAa,CAACR,IAAD,EAAOC,GAAP,CAA9B;AACA,MAAI+C,MAAM,GAAG5B,UAAU,KAAK,KAAKS,WAAjC;;AAEA,MAAImB,MAAJ,EAAY;AACV,QAAI3B,UAAU,GAAGrB,IAAI,CAACU,aAAL,CAAmBT,GAAnB,EAAwB,kBAAxB,CAAjB;;AAEA,SAAKkB,aAAL,CAAmBC,UAAnB,EAA+BpB,IAA/B,EAAqCC,GAArC,EAA0CQ,UAA1C,EAAsDY,UAAtD;AACD,GAJD,MAIO;AACL,QAAIG,UAAU,GAAG,KAAKS,OAAL,CAAa,CAAb,CAAjB;AACAT,IAAAA,UAAU,CAACqB,MAAX,GAAoB,KAApB;AACAnD,IAAAA,OAAO,CAACuD,WAAR,CAAoBzB,UAApB,EAAgC;AAC9BI,MAAAA,KAAK,EAAEf,QAAQ,CAACJ,UAAD;AADe,KAAhC,EAEGqC,WAFH,EAEgB7C,GAFhB;AAGD;;AAED,OAAKiD,aAAL,CAAmBlD,IAAnB,EAAyBC,GAAzB,EAA8BQ,UAA9B,EAA0CP,WAA1C;;AAEA,MAAI8C,MAAJ,EAAY;AACV,QAAIxB,UAAU,GAAG,KAAKS,OAAL,CAAa,CAAb,CAAjB;AACA,QAAIkB,MAAM,GAAGjD,WAAW,IAAIA,WAAW,CAACiD,MAAxC;AACA,QAAIC,MAAM,GAAG;AACXxB,MAAAA,KAAK,EAAEJ,UAAU,CAACI,KAAX,CAAiBhB,KAAjB;AADI,KAAb;AAGAuC,IAAAA,MAAM,KAAKC,MAAM,CAACC,KAAP,GAAe;AACxBC,MAAAA,OAAO,EAAE9B,UAAU,CAAC6B,KAAX,CAAiBC;AADF,KAApB,CAAN;AAGA9B,IAAAA,UAAU,CAACI,KAAX,GAAmB,CAAC,CAAD,EAAI,CAAJ,CAAnB;AACAuB,IAAAA,MAAM,KAAK3B,UAAU,CAAC6B,KAAX,CAAiBC,OAAjB,GAA2B,CAAhC,CAAN;AACA5D,IAAAA,OAAO,CAAC6D,SAAR,CAAkB/B,UAAlB,EAA8B4B,MAA9B,EAAsCN,WAAtC,EAAmD7C,GAAnD;AACD;;AAED,OAAKuD,YAAL,GAAoBV,WAApB;AACD,CApCD,C,CAoCG;;;AAGH,IAAIW,qBAAqB,GAAG,CAAC,WAAD,CAA5B;AACA,IAAIC,uBAAuB,GAAG,CAAC,UAAD,EAAa,WAAb,CAA9B;AACA,IAAIC,qBAAqB,GAAG,CAAC,OAAD,CAA5B;AACA,IAAIC,uBAAuB,GAAG,CAAC,UAAD,EAAa,OAAb,CAA9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAtD,WAAW,CAAC4C,aAAZ,GAA4B,UAAUlD,IAAV,EAAgBC,GAAhB,EAAqBQ,UAArB,EAAiCP,WAAjC,EAA8C;AACxE,MAAIsB,UAAU,GAAG,KAAKS,OAAL,CAAa,CAAb,CAAjB;AACA,MAAIa,WAAW,GAAG9C,IAAI,CAAC+C,SAAvB;AACA,MAAIxB,KAAK,GAAGvB,IAAI,CAACU,aAAL,CAAmBT,GAAnB,EAAwB,OAAxB,CAAZ,CAHwE,CAG1B;;AAE9C,MAAIuB,UAAU,CAACqC,IAAX,KAAoB,OAAxB,EAAiC;AAC/BrC,IAAAA,UAAU,CAACsC,QAAX,CAAoB;AAClBC,MAAAA,aAAa,EAAE;AADG,KAApB;AAGD,GAJD,MAIO;AACLvC,IAAAA,UAAU,CAACwC,QAAX,CAAoB;AAClBV,MAAAA,OAAO,EAAE,IADS;AAElBW,MAAAA,UAAU,EAAE,IAFM;AAGlBC,MAAAA,aAAa,EAAE,IAHG;AAIlBC,MAAAA,aAAa,EAAE,IAJG;AAKlBC,MAAAA,WAAW,EAAE;AALK,KAApB;AAOD;;AAED,MAAIC,SAAS,GAAGnE,WAAW,IAAIA,WAAW,CAACmE,SAA3C;AACA,MAAIC,cAAc,GAAGpE,WAAW,IAAIA,WAAW,CAACoE,cAAhD;AACA,MAAIC,YAAY,GAAGrE,WAAW,IAAIA,WAAW,CAACqE,YAA9C;AACA,MAAIC,YAAY,GAAGtE,WAAW,IAAIA,WAAW,CAACsE,YAA9C;AACA,MAAIC,UAAU,GAAGvE,WAAW,IAAIA,WAAW,CAACuE,UAA5C;AACA,MAAIC,eAAe,GAAGxE,WAAW,IAAIA,WAAW,CAACwE,eAAjD;AACA,MAAIC,cAAc,GAAGzE,WAAW,IAAIA,WAAW,CAACyE,cAAhD;AACA,MAAIC,WAAW,GAAG1E,WAAW,IAAIA,WAAW,CAAC0E,WAA7C;;AAEA,MAAI,CAAC1E,WAAD,IAAgBF,IAAI,CAAC6E,aAAzB,EAAwC;AACtC,QAAIC,SAAS,GAAG5E,WAAW,IAAIA,WAAW,CAAC4E,SAA3B,GAAuC5E,WAAW,CAAC4E,SAAnD,GAA+D9E,IAAI,CAAC+E,YAAL,CAAkB9E,GAAlB,CAA/E,CADsC,CACiE;AACvG;;AAEAoE,IAAAA,SAAS,GAAGS,SAAS,CAACE,QAAV,CAAmBvB,qBAAnB,EAA0CwB,YAA1C,CAAuD,CAAC,OAAD,CAAvD,CAAZ;AACAX,IAAAA,cAAc,GAAGQ,SAAS,CAACE,QAAV,CAAmBtB,uBAAnB,EAA4CuB,YAA5C,EAAjB;AACAV,IAAAA,YAAY,GAAGO,SAAS,CAACI,UAAV,CAAqB,cAArB,CAAf;AACAV,IAAAA,YAAY,GAAGM,SAAS,CAACI,UAAV,CAAqB,cAArB,CAAf;AACAT,IAAAA,UAAU,GAAGK,SAAS,CAACE,QAAV,CAAmBrB,qBAAnB,CAAb;AACAe,IAAAA,eAAe,GAAGI,SAAS,CAACE,QAAV,CAAmBpB,uBAAnB,CAAlB;AACAe,IAAAA,cAAc,GAAGG,SAAS,CAACI,UAAV,CAAqB,gBAArB,CAAjB;AACAN,IAAAA,WAAW,GAAGE,SAAS,CAACI,UAAV,CAAqB,QAArB,CAAd;AACD,GAZD,MAYO;AACLZ,IAAAA,cAAc,GAAGhF,MAAM,CAAC6F,MAAP,CAAc,EAAd,EAAkBb,cAAlB,CAAjB;AACD;;AAED,MAAIc,OAAO,GAAG5D,UAAU,CAAC6B,KAAzB;AACA7B,EAAAA,UAAU,CAACC,IAAX,CAAgB,UAAhB,EAA4B,CAAC8C,YAAY,IAAI,CAAjB,IAAsBc,IAAI,CAACC,EAA3B,GAAgC,GAAhC,IAAuC,CAAnE;;AAEA,MAAId,YAAJ,EAAkB;AAChBhD,IAAAA,UAAU,CAACC,IAAX,CAAgB,UAAhB,EAA4B,CAAC7B,YAAY,CAAC4E,YAAY,CAAC,CAAD,CAAb,EAAkB/D,UAAU,CAAC,CAAD,CAA5B,CAAb,EAA+Cb,YAAY,CAAC4E,YAAY,CAAC,CAAD,CAAb,EAAkB/D,UAAU,CAAC,CAAD,CAA5B,CAA3D,CAA5B;AACD;;AAEDmE,EAAAA,WAAW,IAAIpD,UAAU,CAACC,IAAX,CAAgB,QAAhB,EAA0BmD,WAA1B,CAAf,CAnDwE,CAmDjB;;AAEvDpD,EAAAA,UAAU,CAAC+D,QAAX,CAAoBhE,KAApB,EAA2BrB,WAAW,IAAIA,WAAW,CAACsF,gBAAtD;AACAhE,EAAAA,UAAU,CAACwC,QAAX,CAAoBK,SAApB;AACA,MAAIf,OAAO,GAAGtD,IAAI,CAACU,aAAL,CAAmBT,GAAnB,EAAwB,SAAxB,CAAd;;AAEA,MAAIqD,OAAO,IAAI,IAAf,EAAqB;AACnB8B,IAAAA,OAAO,CAAC9B,OAAR,GAAkBA,OAAlB;AACD;;AAED,MAAImC,KAAK,GAAGzF,IAAI,CAACU,aAAL,CAAmBT,GAAnB,EAAwB,OAAxB,CAAZ;AACA,MAAIyF,QAAQ,GAAGlE,UAAU,CAACmE,UAA1B;;AAEA,MAAIF,KAAK,IAAI,IAAb,EAAmB;AACjB,QAAIC,QAAQ,IAAI,IAAhB,EAAsB;AACpBlE,MAAAA,UAAU,CAACmE,UAAX,GAAwBnE,UAAU,CAACE,EAAnC;AACAF,MAAAA,UAAU,CAACE,EAAX,IAAiB+D,KAAjB;AACD;AACF,GALD,MAKO,IAAIC,QAAQ,IAAI,IAAhB,EAAsB;AAC3BlE,IAAAA,UAAU,CAACE,EAAX,GAAgBgE,QAAhB;AACAlE,IAAAA,UAAU,CAACmE,UAAX,GAAwB,IAAxB;AACD;;AAED,MAAIC,YAAY,GAAG1F,WAAW,IAAIA,WAAW,CAAC0F,YAA9C;AACAlG,EAAAA,OAAO,CAACmG,aAAR,CAAsBT,OAAtB,EAA+Bd,cAA/B,EAA+CG,UAA/C,EAA2DC,eAA3D,EAA4E;AAC1EoB,IAAAA,YAAY,EAAEhD,WAD4D;AAE1EiD,IAAAA,cAAc,EAAE9F,GAF0D;AAG1E+F,IAAAA,WAAW,EAAEC,mBAH6D;AAI1EC,IAAAA,UAAU,EAAE,IAJ8D;AAK1EC,IAAAA,SAAS,EAAE5E;AAL+D,GAA5E,EA3EwE,CAiFpE;;AAEJ,WAAS0E,mBAAT,CAA6BhG,GAA7B,EAAkCmG,GAAlC,EAAuC;AACrC,WAAOR,YAAY,GAAG5F,IAAI,CAACqG,OAAL,CAAapG,GAAb,CAAH,GAAuBH,eAAe,CAACE,IAAD,EAAOC,GAAP,CAAzD;AACD;;AAEDuB,EAAAA,UAAU,CAAC8E,qBAAX,GAAmCzF,QAAQ,CAACJ,UAAD,CAA3C;AACAe,EAAAA,UAAU,CAAC+E,UAAX,GAAwBjC,cAAxB;AACA9C,EAAAA,UAAU,CAACgF,gBAAX,GAA8B7B,cAAc,IAAI7B,WAAW,CAAC2D,kBAAZ,EAAlB,GAAqDD,gBAArD,GAAwE,IAAtG;AACA9G,EAAAA,OAAO,CAACgH,aAAR,CAAsBlF,UAAtB;AACD,CA3FD;;AA6FA,SAASgF,gBAAT,CAA0BG,SAA1B,EAAqCC,OAArC,EAA8C;AAC5C;AACA;AACA,MAAI,KAAKC,WAAL,IAAoB,KAAKC,aAA7B,EAA4C;AAC1C;AACD;;AAED,MAAIF,OAAO,KAAK,UAAhB,EAA4B;AAC1B,QAAIhF,KAAK,GAAG,KAAK0E,qBAAjB;AACA,QAAIS,KAAK,GAAGnF,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAA5B;AACA,QAAIoF,WAAW,GAAG;AAChBpF,MAAAA,KAAK,EAAE,CAACyD,IAAI,CAAC4B,GAAL,CAASrF,KAAK,CAAC,CAAD,CAAL,GAAW,GAApB,EAAyBA,KAAK,CAAC,CAAD,CAAL,GAAW,CAApC,CAAD,EAAyCyD,IAAI,CAAC4B,GAAL,CAASrF,KAAK,CAAC,CAAD,CAAL,GAAW,GAApB,EAAyBA,KAAK,CAAC,CAAD,CAAL,GAAW,IAAImF,KAAxC,CAAzC;AADS,KAAlB,CAH0B,CAKvB;AACH;AACA;AACA;;AAEA,SAAKG,SAAL,CAAeF,WAAf,EAA4B,GAA5B,EAAiC,YAAjC;AACD,GAXD,MAWO,IAAIJ,OAAO,KAAK,QAAhB,EAA0B;AAC/B,SAAKM,SAAL,CAAe;AACbtF,MAAAA,KAAK,EAAE,KAAK0E;AADC,KAAf,EAEG,GAFH,EAEQ,YAFR;AAGD;AACF;AACD;AACA;AACA;AACA;AACA;;;AAGAhG,WAAW,CAAC6G,OAAZ,GAAsB,UAAUC,EAAV,EAAchB,GAAd,EAAmB;AACvC,MAAI5E,UAAU,GAAG,KAAKS,OAAL,CAAa,CAAb,CAAjB,CADuC,CACL;;AAElC,OAAKY,MAAL,GAAcrB,UAAU,CAACqB,MAAX,GAAoB,IAAlC,CAHuC,CAGC;;AAExC,IAAEuD,GAAG,IAAIA,GAAG,CAACiB,SAAb,MAA4B7F,UAAU,CAAC6B,KAAX,CAAiBiE,IAAjB,GAAwB,IAApD;AACA5H,EAAAA,OAAO,CAACuD,WAAR,CAAoBzB,UAApB,EAAgC;AAC9B6B,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAE;AADJ,KADuB;AAI9B1B,IAAAA,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ;AAJuB,GAAhC,EAKG,KAAK4B,YALR,EAKsB,KAAK+D,SAL3B,EAKsCH,EALtC;AAMD,CAZD;;AAcA9H,MAAM,CAACkI,QAAP,CAAgBzH,SAAhB,EAA2BL,OAAO,CAACS,KAAnC;AACA,IAAIsH,QAAQ,GAAG1H,SAAf;AACA2H,MAAM,CAACC,OAAP,GAAiBF,QAAjB","sourcesContent":["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\nvar zrUtil = require(\"zrender/lib/core/util\");\r\n\r\nvar _symbol = require(\"../../util/symbol\");\r\n\r\nvar createSymbol = _symbol.createSymbol;\r\n\r\nvar graphic = require(\"../../util/graphic\");\r\n\r\nvar _number = require(\"../../util/number\");\r\n\r\nvar parsePercent = _number.parsePercent;\r\n\r\nvar _labelHelper = require(\"./labelHelper\");\r\n\r\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/**\r\n * @module echarts/chart/helper/Symbol\r\n */\r\n\r\n/**\r\n * @constructor\r\n * @alias {module:echarts/chart/helper/Symbol}\r\n * @param {module:echarts/data/List} data\r\n * @param {number} idx\r\n * @extends {module:zrender/graphic/Group}\r\n */\r\nfunction SymbolClz(data, idx, seriesScope) {\r\n  graphic.Group.call(this);\r\n  this.updateData(data, idx, seriesScope);\r\n}\r\n\r\nvar symbolProto = SymbolClz.prototype;\r\n/**\r\n * @public\r\n * @static\r\n * @param {module:echarts/data/List} data\r\n * @param {number} dataIndex\r\n * @return {Array.<number>} [width, height]\r\n */\r\n\r\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\r\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\r\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\r\n};\r\n\r\nfunction getScale(symbolSize) {\r\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\r\n}\r\n\r\nfunction driftSymbol(dx, dy) {\r\n  this.parent.drift(dx, dy);\r\n}\r\n\r\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\r\n  // Remove paths created before\r\n  this.removeAll();\r\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\r\n  //     symbolType, -0.5, -0.5, 1, 1, color\r\n  // );\r\n  // If width/height are set too small (e.g., set to 1) on ios10\r\n  // and macOS Sierra, a circle stroke become a rect, no matter what\r\n  // the scale is set. So we set width/height as 2. See #4150.\r\n\r\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\r\n  symbolPath.attr({\r\n    z2: 100,\r\n    culling: true,\r\n    scale: getScale(symbolSize)\r\n  }); // Rewrite drift method\r\n\r\n  symbolPath.drift = driftSymbol;\r\n  this._symbolType = symbolType;\r\n  this.add(symbolPath);\r\n};\r\n/**\r\n * Stop animation\r\n * @param {boolean} toLastFrame\r\n */\r\n\r\n\r\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\r\n  this.childAt(0).stopAnimation(toLastFrame);\r\n};\r\n/**\r\n * FIXME:\r\n * Caution: This method breaks the encapsulation of this module,\r\n * but it indeed brings convenience. So do not use the method\r\n * unless you detailedly know all the implements of `Symbol`,\r\n * especially animation.\r\n *\r\n * Get symbol path element.\r\n */\r\n\r\n\r\nsymbolProto.getSymbolPath = function () {\r\n  return this.childAt(0);\r\n};\r\n/**\r\n * Get scale(aka, current symbol size).\r\n * Including the change caused by animation\r\n */\r\n\r\n\r\nsymbolProto.getScale = function () {\r\n  return this.childAt(0).scale;\r\n};\r\n/**\r\n * Highlight symbol\r\n */\r\n\r\n\r\nsymbolProto.highlight = function () {\r\n  this.childAt(0).trigger('emphasis');\r\n};\r\n/**\r\n * Downplay symbol\r\n */\r\n\r\n\r\nsymbolProto.downplay = function () {\r\n  this.childAt(0).trigger('normal');\r\n};\r\n/**\r\n * @param {number} zlevel\r\n * @param {number} z\r\n */\r\n\r\n\r\nsymbolProto.setZ = function (zlevel, z) {\r\n  var symbolPath = this.childAt(0);\r\n  symbolPath.zlevel = zlevel;\r\n  symbolPath.z = z;\r\n};\r\n\r\nsymbolProto.setDraggable = function (draggable) {\r\n  var symbolPath = this.childAt(0);\r\n  symbolPath.draggable = draggable;\r\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\r\n};\r\n/**\r\n * Update symbol properties\r\n * @param {module:echarts/data/List} data\r\n * @param {number} idx\r\n * @param {Object} [seriesScope]\r\n * @param {Object} [seriesScope.itemStyle]\r\n * @param {Object} [seriesScope.hoverItemStyle]\r\n * @param {Object} [seriesScope.symbolRotate]\r\n * @param {Object} [seriesScope.symbolOffset]\r\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\r\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\r\n * @param {boolean} [seriesScope.hoverAnimation]\r\n * @param {Object} [seriesScope.cursorStyle]\r\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\r\n * @param {string} [seriesScope.symbolInnerColor]\r\n * @param {Object} [seriesScope.fadeIn=false]\r\n */\r\n\r\n\r\nsymbolProto.updateData = function (data, idx, seriesScope) {\r\n  this.silent = false;\r\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\r\n  var seriesModel = data.hostModel;\r\n  var symbolSize = getSymbolSize(data, idx);\r\n  var isInit = symbolType !== this._symbolType;\r\n\r\n  if (isInit) {\r\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\r\n\r\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\r\n  } else {\r\n    var symbolPath = this.childAt(0);\r\n    symbolPath.silent = false;\r\n    graphic.updateProps(symbolPath, {\r\n      scale: getScale(symbolSize)\r\n    }, seriesModel, idx);\r\n  }\r\n\r\n  this._updateCommon(data, idx, symbolSize, seriesScope);\r\n\r\n  if (isInit) {\r\n    var symbolPath = this.childAt(0);\r\n    var fadeIn = seriesScope && seriesScope.fadeIn;\r\n    var target = {\r\n      scale: symbolPath.scale.slice()\r\n    };\r\n    fadeIn && (target.style = {\r\n      opacity: symbolPath.style.opacity\r\n    });\r\n    symbolPath.scale = [0, 0];\r\n    fadeIn && (symbolPath.style.opacity = 0);\r\n    graphic.initProps(symbolPath, target, seriesModel, idx);\r\n  }\r\n\r\n  this._seriesModel = seriesModel;\r\n}; // Update common properties\r\n\r\n\r\nvar normalStyleAccessPath = ['itemStyle'];\r\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\r\nvar normalLabelAccessPath = ['label'];\r\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\r\n/**\r\n * @param {module:echarts/data/List} data\r\n * @param {number} idx\r\n * @param {Array.<number>} symbolSize\r\n * @param {Object} [seriesScope]\r\n */\r\n\r\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\r\n  var symbolPath = this.childAt(0);\r\n  var seriesModel = data.hostModel;\r\n  var color = data.getItemVisual(idx, 'color'); // Reset style\r\n\r\n  if (symbolPath.type !== 'image') {\r\n    symbolPath.useStyle({\r\n      strokeNoScale: true\r\n    });\r\n  } else {\r\n    symbolPath.setStyle({\r\n      opacity: null,\r\n      shadowBlur: null,\r\n      shadowOffsetX: null,\r\n      shadowOffsetY: null,\r\n      shadowColor: null\r\n    });\r\n  }\r\n\r\n  var itemStyle = seriesScope && seriesScope.itemStyle;\r\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\r\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\r\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\r\n  var labelModel = seriesScope && seriesScope.labelModel;\r\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\r\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\r\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\r\n\r\n  if (!seriesScope || data.hasItemOption) {\r\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\r\n    // Because symbol provide setColor individually to set fill and stroke\r\n\r\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\r\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\r\n    symbolRotate = itemModel.getShallow('symbolRotate');\r\n    symbolOffset = itemModel.getShallow('symbolOffset');\r\n    labelModel = itemModel.getModel(normalLabelAccessPath);\r\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\r\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\r\n    cursorStyle = itemModel.getShallow('cursor');\r\n  } else {\r\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\r\n  }\r\n\r\n  var elStyle = symbolPath.style;\r\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\r\n\r\n  if (symbolOffset) {\r\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\r\n  }\r\n\r\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\r\n\r\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\r\n  symbolPath.setStyle(itemStyle);\r\n  var opacity = data.getItemVisual(idx, 'opacity');\r\n\r\n  if (opacity != null) {\r\n    elStyle.opacity = opacity;\r\n  }\r\n\r\n  var liftZ = data.getItemVisual(idx, 'liftZ');\r\n  var z2Origin = symbolPath.__z2Origin;\r\n\r\n  if (liftZ != null) {\r\n    if (z2Origin == null) {\r\n      symbolPath.__z2Origin = symbolPath.z2;\r\n      symbolPath.z2 += liftZ;\r\n    }\r\n  } else if (z2Origin != null) {\r\n    symbolPath.z2 = z2Origin;\r\n    symbolPath.__z2Origin = null;\r\n  }\r\n\r\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\r\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\r\n    labelFetcher: seriesModel,\r\n    labelDataIndex: idx,\r\n    defaultText: getLabelDefaultText,\r\n    isRectText: true,\r\n    autoColor: color\r\n  }); // Do not execute util needed.\r\n\r\n  function getLabelDefaultText(idx, opt) {\r\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\r\n  }\r\n\r\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\r\n  symbolPath.hoverStyle = hoverItemStyle;\r\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\r\n  graphic.setHoverStyle(symbolPath);\r\n};\r\n\r\nfunction highDownOnUpdate(fromState, toState) {\r\n  // Do not support this hover animation util some scenario required.\r\n  // Animation can only be supported in hover layer when using `el.incremetal`.\r\n  if (this.incremental || this.useHoverLayer) {\r\n    return;\r\n  }\r\n\r\n  if (toState === 'emphasis') {\r\n    var scale = this.__symbolOriginalScale;\r\n    var ratio = scale[1] / scale[0];\r\n    var emphasisOpt = {\r\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\r\n    }; // FIXME\r\n    // modify it after support stop specified animation.\r\n    // toState === fromState\r\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\r\n\r\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\r\n  } else if (toState === 'normal') {\r\n    this.animateTo({\r\n      scale: this.__symbolOriginalScale\r\n    }, 400, 'elasticOut');\r\n  }\r\n}\r\n/**\r\n * @param {Function} cb\r\n * @param {Object} [opt]\r\n * @param {Object} [opt.keepLabel=true]\r\n */\r\n\r\n\r\nsymbolProto.fadeOut = function (cb, opt) {\r\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\r\n\r\n  this.silent = symbolPath.silent = true; // Not show text when animating\r\n\r\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\r\n  graphic.updateProps(symbolPath, {\r\n    style: {\r\n      opacity: 0\r\n    },\r\n    scale: [0, 0]\r\n  }, this._seriesModel, this.dataIndex, cb);\r\n};\r\n\r\nzrUtil.inherits(SymbolClz, graphic.Group);\r\nvar _default = SymbolClz;\r\nmodule.exports = _default;"]},"metadata":{},"sourceType":"script"}