{"ast":null,"code":"var guid = require(\"./core/guid\");\n\nvar env = require(\"./core/env\");\n\nvar zrUtil = require(\"./core/util\");\n\nvar Handler = require(\"./Handler\");\n\nvar Storage = require(\"./Storage\");\n\nvar Painter = require(\"./Painter\");\n\nvar Animation = require(\"./animation/Animation\");\n\nvar HandlerProxy = require(\"./dom/HandlerProxy\");\n/*!\r\n* ZRender, a high performance 2d drawing library.\r\n*\r\n* Copyright (c) 2013, Baidu Inc.\r\n* All rights reserved.\r\n*\r\n* LICENSE\r\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\r\n*/\n\n\nvar useVML = !env.canvasSupported;\nvar painterCtors = {\n  canvas: Painter\n};\nvar instances = {}; // ZRender实例map索引\n\n/**\r\n * @type {string}\r\n */\n\nvar version = '4.2.0';\n/**\r\n * Initializing a zrender instance\r\n * @param {HTMLElement} dom\r\n * @param {Object} [opts]\r\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\r\n * @param {number} [opts.devicePixelRatio]\r\n * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\r\n * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\r\n * @return {module:zrender/ZRender}\r\n */\n\nfunction init(dom, opts) {\n  var zr = new ZRender(guid(), dom, opts);\n  instances[zr.id] = zr;\n  return zr;\n}\n/**\r\n * Dispose zrender instance\r\n * @param {module:zrender/ZRender} zr\r\n */\n\n\nfunction dispose(zr) {\n  if (zr) {\n    zr.dispose();\n  } else {\n    for (var key in instances) {\n      if (instances.hasOwnProperty(key)) {\n        instances[key].dispose();\n      }\n    }\n\n    instances = {};\n  }\n\n  return this;\n}\n/**\r\n * Get zrender instance by id\r\n * @param {string} id zrender instance id\r\n * @return {module:zrender/ZRender}\r\n */\n\n\nfunction getInstance(id) {\n  return instances[id];\n}\n\nfunction registerPainter(name, Ctor) {\n  painterCtors[name] = Ctor;\n}\n\nfunction delInstance(id) {\n  delete instances[id];\n}\n/**\r\n * @module zrender/ZRender\r\n */\n\n/**\r\n * @constructor\r\n * @alias module:zrender/ZRender\r\n * @param {string} id\r\n * @param {HTMLElement} dom\r\n * @param {Object} opts\r\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\r\n * @param {number} [opts.devicePixelRatio]\r\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\r\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\r\n */\n\n\nvar ZRender = function ZRender(id, dom, opts) {\n  opts = opts || {};\n  /**\r\n   * @type {HTMLDomElement}\r\n   */\n\n  this.dom = dom;\n  /**\r\n   * @type {string}\r\n   */\n\n  this.id = id;\n  var self = this;\n  var storage = new Storage();\n  var rendererType = opts.renderer; // TODO WebGL\n\n  if (useVML) {\n    if (!painterCtors.vml) {\n      throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n    }\n\n    rendererType = 'vml';\n  } else if (!rendererType || !painterCtors[rendererType]) {\n    rendererType = 'canvas';\n  }\n\n  var painter = new painterCtors[rendererType](dom, storage, opts, id);\n  this.storage = storage;\n  this.painter = painter;\n  var handerProxy = !env.node && !env.worker ? new HandlerProxy(painter.getViewportRoot(), painter.root) : null;\n  this.handler = new Handler(storage, painter, handerProxy, painter.root);\n  /**\r\n   * @type {module:zrender/animation/Animation}\r\n   */\n\n  this.animation = new Animation({\n    stage: {\n      update: zrUtil.bind(this.flush, this)\n    }\n  });\n  this.animation.start();\n  /**\r\n   * @type {boolean}\r\n   * @private\r\n   */\n\n  this._needsRefresh; // 修改 storage.delFromStorage, 每次删除元素之前删除动画\n  // FIXME 有点ugly\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n    el && el.removeSelfFromZr(self);\n  };\n\n  storage.addToStorage = function (el) {\n    oldAddToStorage.call(storage, el);\n    el.addSelfToZr(self);\n  };\n};\n\nZRender.prototype = {\n  constructor: ZRender,\n\n  /**\r\n   * 获取实例唯一标识\r\n   * @return {string}\r\n   */\n  getId: function getId() {\n    return this.id;\n  },\n\n  /**\r\n   * 添加元素\r\n   * @param  {module:zrender/Element} el\r\n   */\n  add: function add(el) {\n    this.storage.addRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\r\n   * 删除元素\r\n   * @param  {module:zrender/Element} el\r\n   */\n  remove: function remove(el) {\n    this.storage.delRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\r\n   * Change configuration of layer\r\n   * @param {string} zLevel\r\n   * @param {Object} config\r\n   * @param {string} [config.clearColor=0] Clear color\r\n   * @param {string} [config.motionBlur=false] If enable motion blur\r\n   * @param {number} [config.lastFrameAlpha=0.7] Motion blur factor. Larger value cause longer trailer\r\n  */\n  configLayer: function configLayer(zLevel, config) {\n    if (this.painter.configLayer) {\n      this.painter.configLayer(zLevel, config);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\r\n   * Set background color\r\n   * @param {string} backgroundColor\r\n   */\n  setBackgroundColor: function setBackgroundColor(backgroundColor) {\n    if (this.painter.setBackgroundColor) {\n      this.painter.setBackgroundColor(backgroundColor);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\r\n   * Repaint the canvas immediately\r\n   */\n  refreshImmediately: function refreshImmediately() {\n    // var start = new Date();\n    // Clear needsRefresh ahead to avoid something wrong happens in refresh\n    // Or it will cause zrender refreshes again and again.\n    this._needsRefresh = this._needsRefreshHover = false;\n    this.painter.refresh(); // Avoid trigger zr.refresh in Element#beforeUpdate hook\n\n    this._needsRefresh = this._needsRefreshHover = false; // var end = new Date();\n    // var log = document.getElementById('log');\n    // if (log) {\n    //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\n    // }\n  },\n\n  /**\r\n   * Mark and repaint the canvas in the next frame of browser\r\n   */\n  refresh: function refresh() {\n    this._needsRefresh = true;\n  },\n\n  /**\r\n   * Perform all refresh\r\n   */\n  flush: function flush() {\n    var triggerRendered;\n\n    if (this._needsRefresh) {\n      triggerRendered = true;\n      this.refreshImmediately();\n    }\n\n    if (this._needsRefreshHover) {\n      triggerRendered = true;\n      this.refreshHoverImmediately();\n    }\n\n    triggerRendered && this.trigger('rendered');\n  },\n\n  /**\r\n   * Add element to hover layer\r\n   * @param  {module:zrender/Element} el\r\n   * @param {Object} style\r\n   */\n  addHover: function addHover(el, style) {\n    if (this.painter.addHover) {\n      var elMirror = this.painter.addHover(el, style);\n      this.refreshHover();\n      return elMirror;\n    }\n  },\n\n  /**\r\n   * Add element from hover layer\r\n   * @param  {module:zrender/Element} el\r\n   */\n  removeHover: function removeHover(el) {\n    if (this.painter.removeHover) {\n      this.painter.removeHover(el);\n      this.refreshHover();\n    }\n  },\n\n  /**\r\n   * Clear all hover elements in hover layer\r\n   * @param  {module:zrender/Element} el\r\n   */\n  clearHover: function clearHover() {\n    if (this.painter.clearHover) {\n      this.painter.clearHover();\n      this.refreshHover();\n    }\n  },\n\n  /**\r\n   * Refresh hover in next frame\r\n   */\n  refreshHover: function refreshHover() {\n    this._needsRefreshHover = true;\n  },\n\n  /**\r\n   * Refresh hover immediately\r\n   */\n  refreshHoverImmediately: function refreshHoverImmediately() {\n    this._needsRefreshHover = false;\n    this.painter.refreshHover && this.painter.refreshHover();\n  },\n\n  /**\r\n   * Resize the canvas.\r\n   * Should be invoked when container size is changed\r\n   * @param {Object} [opts]\r\n   * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\r\n   * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\r\n   */\n  resize: function resize(opts) {\n    opts = opts || {};\n    this.painter.resize(opts.width, opts.height);\n    this.handler.resize();\n  },\n\n  /**\r\n   * Stop and clear all animation immediately\r\n   */\n  clearAnimation: function clearAnimation() {\n    this.animation.clear();\n  },\n\n  /**\r\n   * Get container width\r\n   */\n  getWidth: function getWidth() {\n    return this.painter.getWidth();\n  },\n\n  /**\r\n   * Get container height\r\n   */\n  getHeight: function getHeight() {\n    return this.painter.getHeight();\n  },\n\n  /**\r\n   * Export the canvas as Base64 URL\r\n   * @param {string} type\r\n   * @param {string} [backgroundColor='#fff']\r\n   * @return {string} Base64 URL\r\n   */\n  // toDataURL: function(type, backgroundColor) {\n  //     return this.painter.getRenderedCanvas({\n  //         backgroundColor: backgroundColor\n  //     }).toDataURL(type);\n  // },\n\n  /**\r\n   * Converting a path to image.\r\n   * It has much better performance of drawing image rather than drawing a vector path.\r\n   * @param {module:zrender/graphic/Path} e\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\n  pathToImage: function pathToImage(e, dpr) {\n    return this.painter.pathToImage(e, dpr);\n  },\n\n  /**\r\n   * Set default cursor\r\n   * @param {string} [cursorStyle='default'] 例如 crosshair\r\n   */\n  setCursorStyle: function setCursorStyle(cursorStyle) {\n    this.handler.setCursorStyle(cursorStyle);\n  },\n\n  /**\r\n   * Find hovered element\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @return {Object} {target, topTarget}\r\n   */\n  findHover: function findHover(x, y) {\n    return this.handler.findHover(x, y);\n  },\n\n  /**\r\n   * Bind event\r\n   *\r\n   * @param {string} eventName Event name\r\n   * @param {Function} eventHandler Handler function\r\n   * @param {Object} [context] Context object\r\n   */\n  on: function on(eventName, eventHandler, context) {\n    this.handler.on(eventName, eventHandler, context);\n  },\n\n  /**\r\n   * Unbind event\r\n   * @param {string} eventName Event name\r\n   * @param {Function} [eventHandler] Handler function\r\n   */\n  off: function off(eventName, eventHandler) {\n    this.handler.off(eventName, eventHandler);\n  },\n\n  /**\r\n   * Trigger event manually\r\n   *\r\n   * @param {string} eventName Event name\r\n   * @param {event=} event Event object\r\n   */\n  trigger: function trigger(eventName, event) {\n    this.handler.trigger(eventName, event);\n  },\n\n  /**\r\n   * Clear all objects and the canvas.\r\n   */\n  clear: function clear() {\n    this.storage.delRoot();\n    this.painter.clear();\n  },\n\n  /**\r\n   * Dispose self.\r\n   */\n  dispose: function dispose() {\n    this.animation.stop();\n    this.clear();\n    this.storage.dispose();\n    this.painter.dispose();\n    this.handler.dispose();\n    this.animation = this.storage = this.painter = this.handler = null;\n    delInstance(this.id);\n  }\n};\nexports.version = version;\nexports.init = init;\nexports.dispose = dispose;\nexports.getInstance = getInstance;\nexports.registerPainter = registerPainter;","map":{"version":3,"sources":["C:/Users/user/Desktop/Admin/node_modules/zrender/lib/zrender.js"],"names":["guid","require","env","zrUtil","Handler","Storage","Painter","Animation","HandlerProxy","useVML","canvasSupported","painterCtors","canvas","instances","version","init","dom","opts","zr","ZRender","id","dispose","key","hasOwnProperty","getInstance","registerPainter","name","Ctor","delInstance","self","storage","rendererType","renderer","vml","Error","painter","handerProxy","node","worker","getViewportRoot","root","handler","animation","stage","update","bind","flush","start","_needsRefresh","oldDelFromStorage","delFromStorage","oldAddToStorage","addToStorage","el","call","removeSelfFromZr","addSelfToZr","prototype","constructor","getId","add","addRoot","remove","delRoot","configLayer","zLevel","config","setBackgroundColor","backgroundColor","refreshImmediately","_needsRefreshHover","refresh","triggerRendered","refreshHoverImmediately","trigger","addHover","style","elMirror","refreshHover","removeHover","clearHover","resize","width","height","clearAnimation","clear","getWidth","getHeight","pathToImage","e","dpr","setCursorStyle","cursorStyle","findHover","x","y","on","eventName","eventHandler","context","off","event","stop","exports"],"mappings":"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","sourcesContent":["var guid = require(\"./core/guid\");\r\n\r\nvar env = require(\"./core/env\");\r\n\r\nvar zrUtil = require(\"./core/util\");\r\n\r\nvar Handler = require(\"./Handler\");\r\n\r\nvar Storage = require(\"./Storage\");\r\n\r\nvar Painter = require(\"./Painter\");\r\n\r\nvar Animation = require(\"./animation/Animation\");\r\n\r\nvar HandlerProxy = require(\"./dom/HandlerProxy\");\r\n\r\n/*!\r\n* ZRender, a high performance 2d drawing library.\r\n*\r\n* Copyright (c) 2013, Baidu Inc.\r\n* All rights reserved.\r\n*\r\n* LICENSE\r\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\r\n*/\r\nvar useVML = !env.canvasSupported;\r\nvar painterCtors = {\r\n  canvas: Painter\r\n};\r\nvar instances = {}; // ZRender实例map索引\r\n\r\n/**\r\n * @type {string}\r\n */\r\n\r\nvar version = '4.2.0';\r\n/**\r\n * Initializing a zrender instance\r\n * @param {HTMLElement} dom\r\n * @param {Object} [opts]\r\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\r\n * @param {number} [opts.devicePixelRatio]\r\n * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\r\n * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\r\n * @return {module:zrender/ZRender}\r\n */\r\n\r\nfunction init(dom, opts) {\r\n  var zr = new ZRender(guid(), dom, opts);\r\n  instances[zr.id] = zr;\r\n  return zr;\r\n}\r\n/**\r\n * Dispose zrender instance\r\n * @param {module:zrender/ZRender} zr\r\n */\r\n\r\n\r\nfunction dispose(zr) {\r\n  if (zr) {\r\n    zr.dispose();\r\n  } else {\r\n    for (var key in instances) {\r\n      if (instances.hasOwnProperty(key)) {\r\n        instances[key].dispose();\r\n      }\r\n    }\r\n\r\n    instances = {};\r\n  }\r\n\r\n  return this;\r\n}\r\n/**\r\n * Get zrender instance by id\r\n * @param {string} id zrender instance id\r\n * @return {module:zrender/ZRender}\r\n */\r\n\r\n\r\nfunction getInstance(id) {\r\n  return instances[id];\r\n}\r\n\r\nfunction registerPainter(name, Ctor) {\r\n  painterCtors[name] = Ctor;\r\n}\r\n\r\nfunction delInstance(id) {\r\n  delete instances[id];\r\n}\r\n/**\r\n * @module zrender/ZRender\r\n */\r\n\r\n/**\r\n * @constructor\r\n * @alias module:zrender/ZRender\r\n * @param {string} id\r\n * @param {HTMLElement} dom\r\n * @param {Object} opts\r\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\r\n * @param {number} [opts.devicePixelRatio]\r\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\r\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\r\n */\r\n\r\n\r\nvar ZRender = function (id, dom, opts) {\r\n  opts = opts || {};\r\n  /**\r\n   * @type {HTMLDomElement}\r\n   */\r\n\r\n  this.dom = dom;\r\n  /**\r\n   * @type {string}\r\n   */\r\n\r\n  this.id = id;\r\n  var self = this;\r\n  var storage = new Storage();\r\n  var rendererType = opts.renderer; // TODO WebGL\r\n\r\n  if (useVML) {\r\n    if (!painterCtors.vml) {\r\n      throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\r\n    }\r\n\r\n    rendererType = 'vml';\r\n  } else if (!rendererType || !painterCtors[rendererType]) {\r\n    rendererType = 'canvas';\r\n  }\r\n\r\n  var painter = new painterCtors[rendererType](dom, storage, opts, id);\r\n  this.storage = storage;\r\n  this.painter = painter;\r\n  var handerProxy = !env.node && !env.worker ? new HandlerProxy(painter.getViewportRoot(), painter.root) : null;\r\n  this.handler = new Handler(storage, painter, handerProxy, painter.root);\r\n  /**\r\n   * @type {module:zrender/animation/Animation}\r\n   */\r\n\r\n  this.animation = new Animation({\r\n    stage: {\r\n      update: zrUtil.bind(this.flush, this)\r\n    }\r\n  });\r\n  this.animation.start();\r\n  /**\r\n   * @type {boolean}\r\n   * @private\r\n   */\r\n\r\n  this._needsRefresh; // 修改 storage.delFromStorage, 每次删除元素之前删除动画\r\n  // FIXME 有点ugly\r\n\r\n  var oldDelFromStorage = storage.delFromStorage;\r\n  var oldAddToStorage = storage.addToStorage;\r\n\r\n  storage.delFromStorage = function (el) {\r\n    oldDelFromStorage.call(storage, el);\r\n    el && el.removeSelfFromZr(self);\r\n  };\r\n\r\n  storage.addToStorage = function (el) {\r\n    oldAddToStorage.call(storage, el);\r\n    el.addSelfToZr(self);\r\n  };\r\n};\r\n\r\nZRender.prototype = {\r\n  constructor: ZRender,\r\n\r\n  /**\r\n   * 获取实例唯一标识\r\n   * @return {string}\r\n   */\r\n  getId: function () {\r\n    return this.id;\r\n  },\r\n\r\n  /**\r\n   * 添加元素\r\n   * @param  {module:zrender/Element} el\r\n   */\r\n  add: function (el) {\r\n    this.storage.addRoot(el);\r\n    this._needsRefresh = true;\r\n  },\r\n\r\n  /**\r\n   * 删除元素\r\n   * @param  {module:zrender/Element} el\r\n   */\r\n  remove: function (el) {\r\n    this.storage.delRoot(el);\r\n    this._needsRefresh = true;\r\n  },\r\n\r\n  /**\r\n   * Change configuration of layer\r\n   * @param {string} zLevel\r\n   * @param {Object} config\r\n   * @param {string} [config.clearColor=0] Clear color\r\n   * @param {string} [config.motionBlur=false] If enable motion blur\r\n   * @param {number} [config.lastFrameAlpha=0.7] Motion blur factor. Larger value cause longer trailer\r\n  */\r\n  configLayer: function (zLevel, config) {\r\n    if (this.painter.configLayer) {\r\n      this.painter.configLayer(zLevel, config);\r\n    }\r\n\r\n    this._needsRefresh = true;\r\n  },\r\n\r\n  /**\r\n   * Set background color\r\n   * @param {string} backgroundColor\r\n   */\r\n  setBackgroundColor: function (backgroundColor) {\r\n    if (this.painter.setBackgroundColor) {\r\n      this.painter.setBackgroundColor(backgroundColor);\r\n    }\r\n\r\n    this._needsRefresh = true;\r\n  },\r\n\r\n  /**\r\n   * Repaint the canvas immediately\r\n   */\r\n  refreshImmediately: function () {\r\n    // var start = new Date();\r\n    // Clear needsRefresh ahead to avoid something wrong happens in refresh\r\n    // Or it will cause zrender refreshes again and again.\r\n    this._needsRefresh = this._needsRefreshHover = false;\r\n    this.painter.refresh(); // Avoid trigger zr.refresh in Element#beforeUpdate hook\r\n\r\n    this._needsRefresh = this._needsRefreshHover = false; // var end = new Date();\r\n    // var log = document.getElementById('log');\r\n    // if (log) {\r\n    //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\r\n    // }\r\n  },\r\n\r\n  /**\r\n   * Mark and repaint the canvas in the next frame of browser\r\n   */\r\n  refresh: function () {\r\n    this._needsRefresh = true;\r\n  },\r\n\r\n  /**\r\n   * Perform all refresh\r\n   */\r\n  flush: function () {\r\n    var triggerRendered;\r\n\r\n    if (this._needsRefresh) {\r\n      triggerRendered = true;\r\n      this.refreshImmediately();\r\n    }\r\n\r\n    if (this._needsRefreshHover) {\r\n      triggerRendered = true;\r\n      this.refreshHoverImmediately();\r\n    }\r\n\r\n    triggerRendered && this.trigger('rendered');\r\n  },\r\n\r\n  /**\r\n   * Add element to hover layer\r\n   * @param  {module:zrender/Element} el\r\n   * @param {Object} style\r\n   */\r\n  addHover: function (el, style) {\r\n    if (this.painter.addHover) {\r\n      var elMirror = this.painter.addHover(el, style);\r\n      this.refreshHover();\r\n      return elMirror;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Add element from hover layer\r\n   * @param  {module:zrender/Element} el\r\n   */\r\n  removeHover: function (el) {\r\n    if (this.painter.removeHover) {\r\n      this.painter.removeHover(el);\r\n      this.refreshHover();\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Clear all hover elements in hover layer\r\n   * @param  {module:zrender/Element} el\r\n   */\r\n  clearHover: function () {\r\n    if (this.painter.clearHover) {\r\n      this.painter.clearHover();\r\n      this.refreshHover();\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Refresh hover in next frame\r\n   */\r\n  refreshHover: function () {\r\n    this._needsRefreshHover = true;\r\n  },\r\n\r\n  /**\r\n   * Refresh hover immediately\r\n   */\r\n  refreshHoverImmediately: function () {\r\n    this._needsRefreshHover = false;\r\n    this.painter.refreshHover && this.painter.refreshHover();\r\n  },\r\n\r\n  /**\r\n   * Resize the canvas.\r\n   * Should be invoked when container size is changed\r\n   * @param {Object} [opts]\r\n   * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\r\n   * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\r\n   */\r\n  resize: function (opts) {\r\n    opts = opts || {};\r\n    this.painter.resize(opts.width, opts.height);\r\n    this.handler.resize();\r\n  },\r\n\r\n  /**\r\n   * Stop and clear all animation immediately\r\n   */\r\n  clearAnimation: function () {\r\n    this.animation.clear();\r\n  },\r\n\r\n  /**\r\n   * Get container width\r\n   */\r\n  getWidth: function () {\r\n    return this.painter.getWidth();\r\n  },\r\n\r\n  /**\r\n   * Get container height\r\n   */\r\n  getHeight: function () {\r\n    return this.painter.getHeight();\r\n  },\r\n\r\n  /**\r\n   * Export the canvas as Base64 URL\r\n   * @param {string} type\r\n   * @param {string} [backgroundColor='#fff']\r\n   * @return {string} Base64 URL\r\n   */\r\n  // toDataURL: function(type, backgroundColor) {\r\n  //     return this.painter.getRenderedCanvas({\r\n  //         backgroundColor: backgroundColor\r\n  //     }).toDataURL(type);\r\n  // },\r\n\r\n  /**\r\n   * Converting a path to image.\r\n   * It has much better performance of drawing image rather than drawing a vector path.\r\n   * @param {module:zrender/graphic/Path} e\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  pathToImage: function (e, dpr) {\r\n    return this.painter.pathToImage(e, dpr);\r\n  },\r\n\r\n  /**\r\n   * Set default cursor\r\n   * @param {string} [cursorStyle='default'] 例如 crosshair\r\n   */\r\n  setCursorStyle: function (cursorStyle) {\r\n    this.handler.setCursorStyle(cursorStyle);\r\n  },\r\n\r\n  /**\r\n   * Find hovered element\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @return {Object} {target, topTarget}\r\n   */\r\n  findHover: function (x, y) {\r\n    return this.handler.findHover(x, y);\r\n  },\r\n\r\n  /**\r\n   * Bind event\r\n   *\r\n   * @param {string} eventName Event name\r\n   * @param {Function} eventHandler Handler function\r\n   * @param {Object} [context] Context object\r\n   */\r\n  on: function (eventName, eventHandler, context) {\r\n    this.handler.on(eventName, eventHandler, context);\r\n  },\r\n\r\n  /**\r\n   * Unbind event\r\n   * @param {string} eventName Event name\r\n   * @param {Function} [eventHandler] Handler function\r\n   */\r\n  off: function (eventName, eventHandler) {\r\n    this.handler.off(eventName, eventHandler);\r\n  },\r\n\r\n  /**\r\n   * Trigger event manually\r\n   *\r\n   * @param {string} eventName Event name\r\n   * @param {event=} event Event object\r\n   */\r\n  trigger: function (eventName, event) {\r\n    this.handler.trigger(eventName, event);\r\n  },\r\n\r\n  /**\r\n   * Clear all objects and the canvas.\r\n   */\r\n  clear: function () {\r\n    this.storage.delRoot();\r\n    this.painter.clear();\r\n  },\r\n\r\n  /**\r\n   * Dispose self.\r\n   */\r\n  dispose: function () {\r\n    this.animation.stop();\r\n    this.clear();\r\n    this.storage.dispose();\r\n    this.painter.dispose();\r\n    this.handler.dispose();\r\n    this.animation = this.storage = this.painter = this.handler = null;\r\n    delInstance(this.id);\r\n  }\r\n};\r\nexports.version = version;\r\nexports.init = init;\r\nexports.dispose = dispose;\r\nexports.getInstance = getInstance;\r\nexports.registerPainter = registerPainter;"]},"metadata":{},"sourceType":"script"}